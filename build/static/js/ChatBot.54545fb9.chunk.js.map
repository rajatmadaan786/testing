{"version":3,"sources":["Components/Chatbot/chatbox.js"],"names":["t","recorder","MicRecorder","bitRate","seconds","minutes","hours","ChatBox","useState","isRecording","setRecording","isModalOpen","toggleFeedbackModal","recording_time","setRecordingTime","feedbackText","include_screenshot","currentPageScreenshotURL","feedbackFormData","feedbackFormDataHandler","add","result","document","getElementsByClassName","timer","setTimeout","handleInputChange","event","target","value","type","checked","name","newObj","useEffect","currentPageScreenshot","getElementById","children","style","display","toggleFeedbackForm","pageScreenshotElm","html2canvas","then","canvas","image","Image","src","toDataURL","appendChild","className","minHeight","onClick","placeholder","stop","getMp3","buffer","blob","file","File","lastModified","Date","now","player","Audio","URL","createObjectURL","li","createElement","controls","querySelector","elem","scrollTop","scrollHeight","clearTimeout","catch","e","console","log","alert","start","error","swal","title","text","icon","click","id","isOpen","onChange","data"],"mappings":"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","file":"static/js/ChatBot.54545fb9.chunk.js","sourcesContent":["import React, {useState,useEffect} from 'react';\r\nimport './chatbox.css';\r\nimport swal from 'sweetalert';\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport MicRecorder from 'mic-recorder-to-mp3';\r\nimport html2canvas from 'html2canvas';\r\n\r\nvar recorder = new MicRecorder({\r\n  bitRate: 128\r\n}); \r\n\r\nvar seconds = 0, minutes = 0, hours = 0, t;\r\n\r\nfunction ChatBox(){\r\n\tvar [isRecording, setRecording] = useState(false);\r\n\tvar [isModalOpen, toggleFeedbackModal] = useState(false);\r\n\tvar [recording_time, setRecordingTime] = useState('00:00:00');\r\n\tvar [feedbackFormData, feedbackFormDataHandler] = useState({feedbackText:'',include_screenshot:true, currentPageScreenshotURL:''});\r\n\r\n\tuseEffect(()=>{\r\n\t\tvar currentPageScreenshot = document.getElementById('current-page-screenshot');\r\n\t\tif(!feedbackFormData.include_screenshot){\r\n\t\t\tif(currentPageScreenshot){\r\n\t\t\t\tcurrentPageScreenshot.children[0].style.display = 'none';\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(currentPageScreenshot){\r\n\t\t\t\tcurrentPageScreenshot.children[0].style.display = 'block';\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tfunction imageUpload() {\r\n\t\tdocument.getElementById('file-input').click();\r\n\t}\r\n\r\n\tfunction add() {\r\n\t\tseconds++;\r\n\t\tif (seconds >= 60) {\r\n\t\t    seconds = 0;\r\n\t\t    minutes++;\r\n\t\t    if (minutes >= 60) {\r\n\t\t        minutes = 0;\r\n\t\t        hours++;\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\tvar result = (hours ? (hours > 9 ? hours : \"0\" + hours) : \"00\") + \":\" + (minutes ? (minutes > 9 ? minutes : \"0\" + minutes) : \"00\") + \":\" + (seconds > 9 ? seconds : \"0\" + seconds);\r\n\r\n\t\tvar recordingTimeElm = document.getElementsByClassName('recording-time')[0];\r\n\t\tif(recordingTimeElm){\r\n\t\t\tsetRecordingTime(result);\r\n\t\t\ttimer();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction timer() {\r\n\t\tt = setTimeout(add, 1000);\r\n\t}\r\n\r\n\tfunction startRecording(){\r\n\t\trecorder.start().then(() => {\r\n\t\t  setRecording(true);\r\n\t\t  timer();\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t  if(error.name===\"NotAllowedError\"){\r\n\t\t    swal({\r\n\t\t      title: \"Error\",\r\n\t\t      text: 'Permission Denied! \\n Please grant microphone access to record the audio.',\r\n\t\t      icon: \"warning\"\r\n\t\t    })\r\n\t\t  }else{\r\n\t\t    swal({\r\n\t\t      title: \"Error\",\r\n\t\t      text: 'An unknown error occured while recording the audio! \\n Please try again later or contact to the administrator.',\r\n\t\t      icon: \"warning\"\r\n\t\t    })        \r\n\t\t  }\r\n\t\t});\r\n\t}\r\n\r\n\tfunction stopRecording(){\r\n\t\trecorder.stop().getMp3().then(([buffer, blob]) => {\r\n\t\t\tvar file = new File(buffer, 'me-at-thevoice.mp3', {\r\n\t\t\t\ttype: blob.type,\r\n\t\t\t\tlastModified: Date.now()\r\n\t\t\t});\r\n\r\n\t\t\tvar player = new Audio(URL.createObjectURL(file));\r\n\t\t\tvar li = document.createElement('li');\r\n\t\t\tplayer.controls = true;\r\n\t\t\tli.appendChild(player);\r\n\t\t\tdocument.querySelector('.playlist').appendChild(li);\r\n\r\n\r\n\t\t\tvar elem = document.getElementsByClassName('chat-body')[0];\r\n\t\t\telem.scrollTop = elem.scrollHeight;\r\n\t\t\t\r\n\t\t\tsetRecording(false);\r\n\t\t\tsetRecordingTime('00:00:00');\r\n\t\t\tseconds = 0; minutes = 0; hours = 0;\r\n\t\t\tclearTimeout(t);\r\n\t\t})\r\n\t\t.catch((e) => {\r\n\t\t\tconsole.log(e);\r\n\t\t\talert('Error occured while saving recording');\r\n\t\t\tconsole.log(e);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction handleInputChange(event) {\r\n\t    var target = event.target;\r\n\t    var value = target.type === 'checkbox' ? target.checked : target.value;\r\n\t    var name = target.name;\r\n\r\n\t    var newObj = {...feedbackFormData, [name]:value};\r\n\t    feedbackFormDataHandler(newObj);\r\n\t}\r\n\r\n\tfunction sendFeedbackData(){\r\n\t\tvar data = {\r\n\t\t\tfeedbackText: feedbackFormData.feedbackText\r\n\t\t}\r\n\t\tif(feedbackFormData.include_screenshot){\r\n\t\t\tdata['image'] = feedbackFormData.currentPageScreenshotURL;\r\n\t\t}\r\n\r\n\t\tconsole.log(data);\r\n\r\n\t\tswal({\r\n\t      title: \"Success\",\r\n\t      text: 'Feedback sent successfully!',\r\n\t      icon: \"success\"\r\n\t    })\r\n\r\n\t    toggleFeedbackModal(!isModalOpen);\r\n\t}\r\n\r\n\tvar toggleFeedbackForm = () => {\r\n\t\ttoggleFeedbackModal(!isModalOpen);\r\n\t\tsetTimeout(function(){\t\r\n\t\t    var pageScreenshotElm = document.getElementById('current-page-screenshot');\r\n\t\t    if(pageScreenshotElm){\r\n\t\t\t\thtml2canvas(document.getElementById('root')).then(function(canvas) {\r\n\t\t\t\t\tvar image = new Image();\r\n\t\t\t\t\timage.src = canvas.toDataURL();\r\n\t\t\t\t\tpageScreenshotElm.appendChild(image);\t\r\n\r\n\t\t\t\t    var newObj = {...feedbackFormData, currentPageScreenshotURL:canvas.toDataURL()};\r\n\t\t\t\t    feedbackFormDataHandler(newObj);\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},500)\r\n\t}\r\n\r\n\treturn(\r\n\t\t<div className=\"container main-wrapper mt-3\">\r\n\t\t<div className=\"row\" style={{minHeight: 'calc(100vh - 100px)'}}>\r\n\t\t\t<div className=\"col-lg-12 chat-wrapper\">\r\n\t\t\t\t<div className=\"row chat-header\">\r\n\t\t\t\t\t<div className=\"chat-header-info-part ml-2\">\r\n\t\t\t\t\t  <i className=\"fa fa-arrow-left arrow-icon\"></i>\r\n\t\t\t\t\t  <i className=\"fa fa-user-circle-o fa-2x user-icon\"></i>\r\n\t\t\t\t\t  <span className=\"chat-username\"> &lt;Name&gt; </span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t  <i className=\"fa fa-bars fa fa-2x mr-2\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"row chat-body\">\r\n\t\t\t\t\t<div className=\"message-box-holder message-seen\">\r\n\t\t\t\t\t  <div className=\"message-box\">\r\n\t\t\t\t\t     <span className='msg'>Hello</span>\r\n\t\t\t\t\t\t <img src=\"images/blue-tick.png\" className='tick'/>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"message-box-holder\">\r\n\t\t\t\t\t  <div className=\"message-box message-partner\">\r\n\t\t\t\t\t     <span className='msg'>Hi</span>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"message-box-holder message-seen\">\r\n\t\t\t\t\t  <div className=\"message-box\">\r\n\t\t\t\t\t  <span className='msg'>How are you doing?</span>\r\n\t\t\t\t\t\t <img src=\"images/blue-tick.png\" className='tick'/>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"message-box-holder\">\r\n\t\t\t\t\t  <div className=\"message-box message-partner\">\r\n\t\t\t\t\t  \t<span className='msg'>I'm doing fine. How about you?</span>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"message-box-holder\">\r\n\t\t\t\t\t  <div className=\"message-box\">\r\n\t\t\t\t\t  \t\t<span className='msg'>I am fine.</span>\r\n\t\t\t\t\t\t <img src=\"images/blue-tick.png\" className='tick'/>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"message-box-holder\">\r\n\t\t\t\t\t  <div className=\"message-box message-partner\">\r\n\t\t\t\t\t  \t<span className='msg'>Yeah sure. Let's meet in the Einstein cafe this evening and discuss the matter.</span>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"message-box-holder\">\r\n\t\t\t\t\t  <div className=\"message-box message-partner\">\r\n\t\t\t\t\t  \t<span className='msg'>I thought of coming to your place and discuss about it but I had to finish my projects and I didn't have enough time to go out of the house.</span>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"message-box-holder message-seen\">\r\n\t\t\t\t\t  <div className=\"message-box\">\r\n\t\t\t\t\t  \t<span className='msg'>Okay, As you wish.</span>\r\n\t\t\t\t\t\t <img src=\"images/blue-tick.png\" className='tick'/>\r\n\t\t\t\t\t  </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"voice-recording\">\r\n\t\t\t\t\t  <ul className=\"playlist\"></ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"row chat-footer\">\r\n\t\t\t\t\t<div className=\"message-input-box\">\r\n\t\t\t\t\t\t<i className=\"fa fa-commenting-o feedback-icon\" onClick={toggleFeedbackForm} />\r\n\t\t\t\t\t\t<input type=\"text\" className=\"chat-message\" placeholder=\"Type message\" />\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t(!isRecording)?\r\n\t\t\t\t\t\t  <i className=\"fa fa-microphone microphone-icon\" onClick={startRecording} />\r\n\t\t\t\t\t\t :\r\n\t\t\t\t\t\t  <>\r\n\t\t\t\t\t\t    <small className=\"recording-time\">{recording_time}</small>\r\n\t\t\t\t\t\t    <i className=\"fa fa-square recording-icon\" onClick={stopRecording} />\r\n\t\t\t\t\t\t  </>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"image-upload\">\r\n\t\t\t\t\t  <button className=\"paperclip\" onClick={imageUpload}>\r\n\t\t\t\t\t    <i className=\"fa fa-paperclip\"/>\r\n\t\t\t\t\t  </button>\r\n\t\t\t\t\t    <input id=\"file-input\" type=\"file\"/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button className=\"send-attachment\">\r\n\t\t\t\t\t  <i className=\"fa fa-paper-plane-o\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<Modal isOpen={isModalOpen}>\r\n\t\t        <ModalHeader>Send Feedback</ModalHeader>\r\n\t\t        <ModalBody>\r\n\t\t\t\t\t<textarea className=\"feedback-text\" placeholder=\"Have feedback? We’d love to hear it, but please don’t share sensitive information. Have questions? Try help or support.\" name=\"feedbackText\" onChange={handleInputChange}></textarea>\r\n\t\t\t\t\t<label className=\"mb-3\"><input type=\"checkbox\" name=\"include_screenshot\" onChange={handleInputChange} checked={feedbackFormData.include_screenshot} /> Include Screenshot</label>\r\n\t\t\t\t\t<div id=\"current-page-screenshot\"></div>\r\n\t\t\t\t\t<small>Go to the Legal Help page to request content changes for legal reasons. Some account and system information may be sent to Google. We will use the information you give us to help address technical issues and to improve our services, subject to our Privacy Policy and Terms of Service.</small>\r\n\t\t        </ModalBody>\r\n\t\t        <ModalFooter>\r\n\t\t\t        <div className=\"action-buttons\">\r\n\t\t\t\t        <button className=\"btn\" onClick={toggleFeedbackForm}>Cancel</button>\r\n\t\t\t\t        <button className=\"btn btn-link\" onClick={sendFeedbackData}>Send</button>\r\n\t\t\t        </div>\r\n\t\t        </ModalFooter>\r\n\t\t    </Modal>  \r\n\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ChatBox;"],"sourceRoot":""}